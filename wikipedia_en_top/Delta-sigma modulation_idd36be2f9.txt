Delta-sigma modulation
Delta-sigma (ΔΣ; or sigma-delta, ΣΔ) modulation is a method for encoding analog signals into digital signals as found in an analog-to-digital converter (ADC). It is also used to convert high-bit-count, low-frequency digital signals into lower-bit-count, higher-frequency digital signals as part of the process to convert digital signals into analog as part of a digital-to-analog converter (DAC).
In a conventional ADC, an analog signal is sampled with a sampling frequency and subsequently quantized in a multi-level quantizer into a digital signal. This process introduces quantization error noise. The first step in a delta-sigma modulation is delta modulation. In delta modulation the change in the signal (its delta) is encoded, rather than the absolute value. The result is a stream of pulses, as opposed to a stream of numbers as is the case with pulse-code modulation (PCM). In delta-sigma modulation, accuracy of the modulation is improved by passing the digital output through a 1-bit DAC and adding (sigma) the resulting analog signal to the input signal (the signal before delta modulation), thereby reducing the error introduced by the delta modulation.
Both ADCs and DACs can employ delta-sigma modulation. A delta-sigma ADC first encodes an analog signal using high-frequency delta-sigma modulation and then applies a digital filter to form a higher-resolution but lower sample-frequency digital output. A delta-sigma DAC encodes a high-resolution digital input signal into a lower-resolution but higher sample-frequency signal that is mapped to voltages, and then smoothed with an analog filter. In both cases, the temporary use of a lower-resolution signal simplifies circuit design and improves efficiency.
Primarily because of its cost efficiency and reduced circuit complexity, this technique has found increasing use in modern electronic components such as DACs, ADCs, frequency synthesizers, switched-mode power supplies and motor controllers. The coarsely-quantized output of a delta-sigma modulator is occasionally used directly in signal processing or as a representation for signal storage. For example, the Super Audio CD (SACD) stores the output of a delta-sigma modulator directly on a disk.
Motivation
Delta-sigma modulation converts an analog voltage signal into a pulse frequency, or pulse density, which can be understood as pulse-density modulation (PDM).  A sequence of positive and negative pulses, representing bits at a known fixed rate, is very easy to generate, transmit, and accurately regenerate at the receiver, given only that the timing and sign of the pulses can be recovered.  Given such a sequence of pulses from a delta-sigma modulator, the original waveform can be reconstructed with adequate precision.  In contrast, without conversion to a pulse stream but simply transmitting the analog signal directly, all noise in the system would be added to the analog signal, reducing its quality.  The use of PDM as a signal representation is an alternative to pulse-code modulation (PCM), sampling and quantizing to a multi-bit code at the Nyquist rate.
Analog to digital conversion
Description
A delta-sigma or other pulse-density or pulse-frequency modulator generates a pulse stream in which the frequency, f, of pulses in the stream is proportional to the analog voltage input, v, so that  f = k · v, where k is a constant for the particular implementation.  A feedback loop monitors the integral of v and when that integral has incremented by Δ, which is indicated by the integral waveform crossing a threshold, T, it subtracts Δ from the integral of v so that the combined waveform sawtooths between T and T − Δ. At each step a pulse is added to the pulse stream.
A counter sums the number of pulses that occur in a predetermined period, $MATH$, so that the sum, $MATH$, is $MATH$. In a given implementation, $MATH$ is chosen so that a digital display of the count, $MATH$, is a display of $MATH$ with a predetermined scaling factor. Because $MATH$ may take any designed value, it may be made large enough to give any desired resolution or accuracy.
Analysis
For the purpose of introduction, Figure 1 illustrates the concept of voltage-to-frequency conversion, in an unclocked form that resembles delta-sigma modulation, and is called asynchronous modulation, asynchronous delta-sigma modulation, or free-running modulators.
Shown below that are waveforms at points designated by numbers 1 to 5 for an input of 0.2 volts in the left column and 0.4 volts in the right column.  The stream of delta impulses generated at each threshold crossing is shown at (2) and the difference between (1) and (2) is shown at (3). This difference is integrated to produce the waveform (4). The threshold detector generates a pulse (5) which starts as the waveform (4) crosses the threshold and is sustained until the waveform (4) falls below the threshold. The threshold (5) triggers the impulse generator to produce a fixed-strength impulse.
The integral (4) crosses the threshold in half the time in the right column than in the left column. Thus the frequency of impulses is doubled. Hence the count increments at twice the speed on the right to that on the left; this pulse rate doubling is consistent with the input voltage being doubled.
Construction of the waveforms illustrated at (4) is aided by concepts associated with the Dirac delta function in that, by definition, all impulses of the same strength produce the same step when integrated. Then (4) is constructed using an intermediate step (6), a hypothetical waveform not in the circuit but in which each integrated ideal delta function impulse is integrated to a step. The effect of the finite duration of the actual pulse is constructed in (4) by drawing a line from the base of the impulse step at zero volts to intersect the decay line from (6) at the full duration of the pulse.
In the circuit outside the loop, the summing interval is a predetermined fixed time, and at its expiry, the count is stored, and the buffer and the counter are reset. The buffer then presents a sequence of digital values corresponding to quantizations of the analog signal levels during the summing intervals.  Using a summing interval is a way (not necessarily the ideal way) to quantize the asynchronous pulse stream to a code; it will have less quantization error if the interval start is synchronized to a pulse.
Delta-sigma converters further constrain operation of the impulse generator such that the start of the impulse is delayed until the next occurrence of the appropriate clock-pulse boundary. The effect of this delay is illustrated in Figure 1a for a sequence of impulses that occur at a nominal 2.5 clock intervals.
Practical implementation
A circuit diagram for a delta-sigma modulator implementation is shown in Figure 1b, with the associated waveforms in Figure 1c.  The waveforms shown in Figure 1c are unusually complicated because they are intended to illustrate the loop behavior under extreme conditions, Vin saturated at full scale of 1.0 V, and saturated at zero. An intermediate state is also indicated, Vin at 0.4V, where it is very similar to the operation of the illustration of Figure 1.
From the top of Figure 1c, the waveforms, labeled as they are on the circuit diagram, are:
Improvements to resolution and noise
Examination of Figure 1c(g) shows that there are zero pulses in the countstream when the input voltage is zero. This condition can have the effect that high-frequency components of a complex signal are not resolved.  This effect is known as intermodulation distortion  (IMD). One of the pitfalls of applying linear analysis to a nonlinear system is that IMD, because it can be a consequence of nonlinearity, is not present in the analysis. Purely for illustrative purposes, a method to mitigate this would be to add an 0.5 volt constant bias to the input voltage so the it now can swing +/− 0.5 V about the bias.  This now has zero pulses in the countstream when the input is −0.5 V. Then we must limit the input swing to +/− 0.4 V, say, so that the minimum countstream frequency is greater than zero. We can choose the clock frequency so that the minimum countstream frequency at −0.4 V is much greater than the Nyquist rate, so that even  the highest input frequency component is resolved.  We can increase the clock frequency still higher until a lowpass filter sufficiently removes the pulsations while fully recovering the input signal.  In this illustrative discussion the filtered signal will also recover the bias which can be removed by an analog adder, while still retaining the DC component of the input signal.
Remarks
According to Wooley, the seminal paper combining feedback with oversampling to achieve delta modulation was by F. de Jager in 1952.
The delta-sigma configuration was devised by Inose et al. in 1962 to solve problems in the accurate transmission of analog signals. In that application it was the pulse stream that was transmitted and the original analog signal recovered with a lowpass filter after the received pulses had been reformed. This low pass filter performed the summation function associated with Σ. The highly mathematical treatment of transmission errors was introduced by them and is appropriate when applied to the pulse stream but these errors are lost in the accumulation process associated with Σ.
For the analog-to-digital conversion application each pulse in the count stream is a sample of the mean of the input voltage equal to the reference voltage divided the interval between pulses, ts. This because it is an integration of the input waveform over interval ts. Frequency domain analysis of the complex waveform in this interval, ts, will represent it by the sum of a constant plus a fundamental and harmonics each of which has an exact integer number of cycles over ts. The integral of a sine wave over one or more full cycles is zero. Therefore, the integral of the incoming waveform over the interval ts reduces to the mean over the interval. The count, N, accumulated during the summing interval represents N samples of the mean and N divided by the count defining the summing interval is thus the mean of means and so subject to little variance.
Digital to analog conversion
In general, a DAC converts a digital number, N, representing some analog value into that analog voltage value. To make the conversion the digital number is first loaded into a counter. Then the counter is counted down to zero with a string of pulses equal in number to N. Each pulse of the string is given a known integral, δ. Then the string is integrated to produce N.δ, the sum of the pulses. This is the required analog voltage.
In some applications where an analog signal is represented by a series of digital numbers that require conversion to a frequency-modulated stream it may be sufficient to take the stream of pulses (two or three level)  resulting from the DAC conversion of each number N in turn and apply that stream through a low pass filter directly to the output. The output before filtering will be a crudely frequency-modulated stream with bursts of pulses proportional in length and number to the analog of N separated by blank intervals between bursts.
In order to remove the blank intervals and improve the noise performance the full conversion to analog voltage of each successive N by the DAC described above may be held in a sample and hold circuit then passed to a delta-sigma converter to produce a stream of contiguous bursts each of which has its frequency proportional to its generating  N.
Decimation structures
The conceptually simplest decimation structure is a counter that is reset to zero at the beginning of each integration period, then read out at the end of the integration period.
The multi-stage noise shaping (MASH) structure has a noise shaping property, and is commonly used in digital audio and fractional-N frequency synthesizers.  It comprises two or more cascaded overflowing accumulators, each of which is equivalent to a first-order sigma-delta modulator.  The carry outputs are combined through summations and delays to produce a binary output, the width of which depends on the number of stages (order) of the MASH.  Besides its noise shaping function, it has two more attractive properties:
A very popular decimation structure is the sinc filter. For second-order modulators, the sinc3 filter is close to optimum.
Example of decimation
Given an 8:1 decimation filter and a 1-bit bitstream:
For example, the input stream 10010110 contains 4 1s. The decimation result is 4/8 = 0.5. This result can be represented by the 3-bit binary number 100, which corresponds to half of the largest possible number. 
Once decimation is applied, if the n-bit codes are transmitted, the signal becomes PCM. Decimation is strongly associated with delta-sigma modulation but is distinct.
Variations
There are many kinds of ADC that use this delta-sigma structure.
The above analysis focuses on the simplest 1st-order, 2-level, uniform-decimation sigma-delta ADC.
Many ADCs use a second-order 5-level sinc3 sigma-delta structure. Much of what follows uses an arcane shorthand using symbols representing operational functions with analysis given in terms of Laplace transforms, etc. This is the lingua franca of the data transmission industry and it does not communicate to the general public. If a fuller documentation of a particular method is needed look no further than the patents. (Patent examiners generally require full disclosure.) An excellent history is "The Evolution of Oversampling Analog-to-Digital Converters" by Bruce A. Wooley which gives many references to the relevant patents.
Second-order and higher-order modulator
The number of integrators, and consequently, the numbers of feedback loops, indicates the order of a ΔΣ modulator; a second-order ΔΣ modulator is shown in Figure 4. First-order modulators are unconditionally stable, but stability analysis must be performed for higher-order modulators.
3-level and higher quantizer
The modulator can also be classified by the number of bits it has in its output, which strictly depends on the output of the quantizer. The quantizer can be realized with a N-level comparator, thus the modulator has log2N-bit output.
A simple comparator has 2 levels and so is 1 bit quantizer; a 3-level quantizer is called a "1.5" bit quantizer; a 4-level quantizer is a 2-bit quantizer; a 5-level quantizer is called a 2.5-bit quantizer.
Relationship to delta modulation
Delta-sigma modulation is inspired by delta modulation, as shown in Figure 2. If quantization were homogeneous (e.g., if it were linear), the following would be a sufficient derivation of the equivalence:
Because the quantizer is not homogeneous, delta-sigma is inspired by delta modulation, but the two are distinct in operation. 
From the first block diagram in Figure 2, the integrator in the feedback path can be removed if the feedback is taken directly from the input of the low-pass filter. Hence, for delta modulation of input signal u, the low-pass filter sees the signal
However, sigma-delta modulation of the same input signal places at the low-pass filter
In other words, delta-sigma and delta modulation swap the position of the integrator and quantizer. The net effect is a simpler implementation that has the added benefit of shaping the quantization noise away from signals of interest (i.e., signals of interest are low-pass filtered while quantization noise is high-pass filtered). This effect becomes more dramatic with increased oversampling, which allows for quantization noise to be somewhat programmable. On the other hand, delta modulation shapes both noise and signal equally.
Additionally, the quantizer (e.g., comparator) used in delta modulation has a small output representing a small step up and down the quantized approximation of the input while the quantizer used in delta-sigma must take values outside of the range of the input signal, as shown in Figure 3.
In general, delta-sigma has some advantages versus delta modulation:
Quantization theory formulas
When a signal is quantized, the resulting signal has approximately the second-order statistics of a signal with independent white noise added.  Assuming that the signal value is in the range of one step of the quantized value with an equal distribution, the root mean square value of this quantization noise is
In reality, the quantization noise is, of course, not independent of the signal and this dependence results in limit cycles and is the source of idle tones and pattern noise in sigma-delta converters.
Quantization noise may be reduced by increasing the oversampling ratio (OSR) defined by
where $MATH$ is the sampling frequency and $MATH$ is Nyquist rate.
The RMS noise voltage within the band of interest ($MATH$) can be expressed in terms of OSR
Oversampling
ΔΣ modulation is a technique of oversampling to reduce the noise in the band of interest (green in Figure 5), which avoids the use of high-precision analog circuits for the anti-aliasing filter. The total quantization noise is the same both in a Nyquist converter (in yellow) and in an oversampling converter (in blue), but it is distributed over a different spectrum. In ΔΣ converters, noise is further reduced at low frequencies, which is the band where the signal of interest is, and it is increased at the higher frequencies, where it can be filtered out. This technique is known as noise shaping.
For a first-order delta-sigma modulator, the noise is shaped by a filter with transfer function Hn(z) = [1 − z−1].  Assuming that the sampling frequency fs is large compared to a signal frequency of interest, f0, the quantization noise in the desired signal bandwidth can be approximated as:
Similarly for a second-order delta-sigma modulator, the noise is shaped by a filter with transfer function Hn(z) = [1 − z−1]2. The in-band quantization noise can be approximated as:
In general, for a N-order ΔΣ modulator, the variance of the in-band quantization noise is:
When the sampling frequency is doubled, the signal-to-quantization-noise ratio is improved by 6N + 3 dB for a N-order ΔΣ modulator. The higher the oversampling ratio, the higher the signal-to-noise ratio and the higher the resolution in bits.
Another key aspect given by oversampling is the speed/resolution tradeoff.  The decimation filter put after the modulator not only filters the whole sampled signal in the band of interest (cutting the noise at higher frequencies), but also reduces the frequency of the signal, increasing its resolution. This is obtained by a sort of averaging of the higher-data-rate bitstream.
Naming
The technique was first presented in the early 1960s by professor Yasuhiko Yasuda while he was a student at the University of Tokyo. The name delta-sigma comes directly from the presence of a delta modulator and an integrator, as firstly introduced by Inose et al. in their patent application. That is, the name comes from integrating or summing differences, which, in mathematics, are operations usually associated with Greek letters sigma and delta respectively. Both names sigma-delta and delta-sigma are frequently used.
See also
References
Further reading