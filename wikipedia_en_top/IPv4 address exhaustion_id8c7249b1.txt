IPv4 address exhaustion
IPv4 address exhaustion is the depletion of the pool of unallocated IPv4 addresses. Because the original Internet architecture had fewer than 4.3 billion addresses available, depletion has been anticipated since the late 1980s, when the Internet started experiencing dramatic growth. This depletion is one of the reasons for the development and deployment of its successor protocol, IPv6. IPv4 and IPv6 coexist on the Internet.
The IP address space is managed globally by the Internet Assigned Numbers Authority (IANA), and by five regional Internet registries (RIRs) responsible in their designated territories for assignment to end users and local Internet registries, such as Internet service providers. The main market forces that accelerated IPv4 address depletion included the rapidly growing number of Internet users, always-on devices, and mobile devices.
The anticipated shortage has been the driving factor in creating and adopting several new technologies, including network address translation (NAT), Classless Inter-Domain Routing (CIDR) in 1993, and IPv6 in 1998.
The top-level exhaustion occurred on 31 January 2011. All RIRs have exhausted their address pools, except those reserved for IPv6 transition; this occurred on 15 April 2011 for the Asia-Pacific (APNIC), on 10 June 2014 for Latin America and the Caribbean (LACNIC), on 24 September 2015 for North America (ARIN), on 21 April 2017 for Africa (AfriNIC), and on 25 November 2019 for Europe, Middle East and Central Asia (RIPE NCC). These RIRs still allocate recovered addresses or addresses reserved for a special purpose. Individual ISPs still have pools of unassigned IP addresses, and could recycle addresses no longer needed by subscribers.
IP addressing
Every node of an Internet Protocol (IP) network, such as a computer, router, or network printer, is assigned an IP address for each network interface, used to locate and identify the node in communications with other nodes on the network. Internet Protocol version 4 provides 232 (4,294,967,296) addresses. However, large blocks of IPv4 addresses are reserved for special uses and are unavailable for public allocation.
The IPv4 addressing structure provides an insufficient number of publicly routable addresses to provide a distinct address to every Internet device or service. This problem has been mitigated for some time by changes in the address allocation and routing infrastructure of the Internet. The transition from classful network addressing to Classless Inter-Domain Routing delayed the exhaustion of addresses substantially. In addition, network address translation (NAT) permits Internet service providers and enterprises to masquerade private network address space with only one publicly routable IPv4 address on the Internet interface of a main Internet router, instead of allocating a public address to each network device.
Address depletion
While the primary reason for IPv4 address exhaustion is insufficient capacity in the design of the original Internet infrastructure, several additional driving factors have aggravated the shortcomings. Each of them increased the demand on the limited supply of addresses, often in ways unanticipated by the original designers of the network.
Mitigation efforts
Efforts to delay address space exhaustion started with the recognition of the problem in the early 1990s, and the introduction of a number of stop-gap refinements to make the existing structure operate more efficiently, such as CIDR methods and strict usage-based allocation policies.
The Internet Engineering Task Force (IETF) created the Routing and Addressing Group (ROAD) in November 1991 to respond to the scalability problem caused by the classful network allocation system in place at the time.
IPv6, the successor technology to IPv4, was designed to address this problem. It supports approximately 3.4×1038 network addresses. Although as of 2008 the predicted depletion was already approaching its final stages, most providers of Internet services and software vendors were just beginning IPv6 deployment at that time.
Other mitigation efforts and technologies include:
Exhaustion dates and impact
On 31 January 2011, the last two unreserved IANA /8 address blocks were allocated to APNIC according to RIR request procedures. This left five reserved but unallocated /8 blocks. In accord with ICANN policies, IANA proceeded to allocate one of those five /8s to each RIR, exhausting the IANA pool, at a ceremony and press conference on 3 February 2011.
The various legacy address blocks with administration historically split among the RIRs were distributed to the RIRs in February 2011.
APNIC was the first regional Internet registry to run out of freely allocated IPv4 addresses, on 15 April 2011. This date marked the point where not everyone who needed an IPv4 address could be allocated one. As a consequence of this exhaustion, end-to-end connectivity as required by specific applications will not be universally available on the Internet until IPv6 is fully implemented. However, IPv6 hosts cannot directly communicate with IPv4 hosts, and have to communicate using special gateway services. This means that general-purpose computers must still have IPv4 access, for example through NAT64, in addition to the new IPv6 address, which is more effort than just supporting IPv4 or IPv6. The demand for IPv6 is expected to become pervasive over three to four years.
In early 2011, only 16–26% of computers were IPv6 capable, while only 0.2% preferred IPv6 addressing with many using transition methods such as Teredo tunneling. About 0.15% of the top million websites were IPv6 accessible in 2011. Complicating matters, 0.027% to 0.12% of visitors could not reach dual-stack sites, but a larger percentage (0.27%) could not reach IPv4-only sites. IPv4 exhaustion mitigation technologies include IPv4 address sharing to access IPv4 content, IPv6 dual-stack implementation, protocol translation to access IPv4 and IPv6-addressed content, and bridging and tunneling to bypass single protocol routers. Early signs of accelerated IPv6 adoption after IANA exhaustion are evident.
Regional exhaustion
All the RIRs have set aside a small pool of IP addresses for the transition to IPv6 (for example carrier-grade NAT), from which each LIR can typically get at most 1024 in total. ARIN and LACNIC reserves the last /10 for IPv6 transition. APNIC, and RIPE NCC have reserved the last obtained /8 block for IPv6 transition. AFRINIC reserves a /11 block for this purpose. When only this last block remains, the RIR's supply of IPv4 addresses is said to be "exhausted".
APNIC was the first RIR to restrict allocations to 1024 addresses for each member, as its pool reached critical levels of one /8 block on 14 April 2011. The APNIC RIR is responsible for address allocation in the area of fastest Internet expansion, including the emerging markets of China and India.
RIPE NCC, the regional Internet registry for Europe, was the second RIR to deplete its address pool on 14 September 2012.
On 10 June 2014, LACNIC, the regional Internet registry for Latin America and the Caribbean, was the third RIR to deplete its address pool.
ARIN was exhausted on 24 September 2015. ARIN has been unable to allocate large requests since July 2015, but smaller requests were still being met. After IANA exhaustion, IPv4 address space requests became subject to additional restrictions at ARIN, and became even more restrictive after reaching the last /8 in April 2014.
On 31 March 2017, AFRINIC became the last regional Internet registry to run down to its last /8 block of IPv4 addresses (102/8), thus triggering the first phase of its IPv4 exhaustion policy. "On 13 January 2020, AFRINIC approved an IPv4 prefix that resulted in no more than a /11 of non-reserved space to be available in the Final /8," which triggered its IPv4 Exhaustion Phase 2.
On 25 November 2019, RIPE NCC announced that it had made its "final /22 IPv4 allocation from the last remaining addresses in our available pool. We have now run out of IPv4 addresses." RIPE NCC will continue to allocate IPv4 addresses, but only "from organisations that have gone out of business or are closed, or from networks that return addresses they no longer need. These addresses will be allocated to our members (LIRs) according to their position on a new waiting list…" The announcement also called for support for the implementation of the IPv6 roll-out.
Impact of APNIC RIR exhaustion and LIR exhaustion
Systems that require inter-continental connectivity will have to deal with exhaustion mitigation already due to APNIC exhaustion.
At APNIC, existing LIRs could apply for twelve months stock before exhaustion when they were using more than 80% of allocated space allocated to them. Since 15 April 2011, the date when APNIC reached its last /8 block, each (current or future) member will only be able to get one allocation of 1024 addresses (a /22 block) once. As the slope of the APNIC pool line on the "Geoff Huston's projection of the evolution of the IP pool for each RIR" chart to the right shows, the last /8 block would have been emptied within one month without this policy. By APNIC policy, each current or future member can receive only one /22 block from this last /8 (there are 16384 /22 blocks in the last /8 block). Since there are around 3000 current APNIC members, and around 300 new APNIC members each year, APNIC expects this last /8 block to last for many years. Since the redistribution of recovered space, APNIC is distributing an additional /22 to each member upon request.
The 1,024 addresses in the /22 block can be used by APNIC members to supply NAT44 or NAT64 as a service on an IPv6 network. However at a new large ISP, 1,024 IPv4 addresses might not be enough to provide IPv4 connectivity to all the customers due to the limited number of ports available per IPv4 address.
The regional Internet registries (RIRs) for Asia (APNIC) and North America have a policy called the Inter-RIR IPv4 Address Transfer Policy, which allows IPv4 addresses to be transferred from North America to Asia. The ARIN policy was implemented on 31 July 2012.
IPv4 broker businesses have been established to facilitate these transfers.
Notable exhaustion advisories
Estimates of the time of complete IPv4 address exhaustion varied widely in the early 2000s. In 2003, Paul Wilson (director of APNIC) stated that, based on then-current rates of deployment, the available space would last for one or two decades. In September 2005, a report by Cisco Systems suggested that the pool of available addresses would deplete in as little as 4 to 5 years. In the last year before exhaustion, IPv4 allocations were accelerating, resulting in exhaustion trending to earlier dates.
Post-exhaustion mitigation
By 2008 policy planning for the end-game and post-exhaustion era was underway. Several proposals have been discussed to delay shortages of IPv4 addresses:
Reclamation of unused IPv4 space
Before and during the time when classful network design was still used as allocation model, large blocks of IP addresses were allocated to some organizations. Since the use of CIDR the Internet Assigned Numbers Authority (IANA) could potentially reclaim these ranges and reissue the addresses in smaller blocks. ARIN, RIPE NCC and APNIC have a transfer policy, such that addresses can get returned, with the purpose to be reassigned to a specific recipient. However, it can be expensive in terms of cost and time to renumber a large network, so these organizations are likely to object, with legal conflicts possible. However, even if all of these were reclaimed, it would only result in postponing the date of address exhaustion.
Similarly, IP address blocks have been allocated to entities that no longer exist and some allocated IP address blocks or large portions of them have never been used. No strict accounting of IP address allocations has been undertaken, and it would take a significant amount of effort to track down which addresses really are unused, as many are in use only on intranets.
Some address space previously reserved by IANA has been added to the available pool. There have been proposals to use the class E network range of IPv4 addresses (which would add 268.4 million IP addresses to the available pool) but many computer and router operating systems and firmware do not allow the use of these addresses. For this reason, the proposals have sought not to designate the class E space for public assignment, but instead propose to permit its private use for networks that require more address space than is currently available through RFC 1918.
Several organizations have returned large blocks of IP addresses. Notably, Stanford University relinquished their Class A IP address block in 2000, making 16 million IP addresses available. Other organizations that have done so include the United States Department of Defense, BBN Technologies, and Interop.
Markets in IP addresses
The creation of markets to buy and sell IPv4 addresses has been considered to be a solution to the problem of IPv4 scarcity and a means of redistribution. The primary benefits of an IPv4 address market are that it allows buyers to maintain undisrupted local network functionality. IPv6 adoption, while in progress, is currently still in early stages. It requires a significant investment of resources, and poses incompatibility issues with IPv4, as well as certain security and stability risks.
Transition mechanisms
As the IPv4 address pool depletes, some ISPs will not be able to provide globally routable IPv4 addresses to customers. Nevertheless, customers are likely to require access to services on the IPv4 Internet. Several technologies have been developed for providing IPv4 service over an IPv6 access network.
In ISP-level IPv4 NAT, ISPs may implement IPv4 network address translation within their networks and assign private IPv4 addresses to customers. This approach may allow customers to keep using existing hardware. Some estimates for NAT argue that US ISPs have 5-10 times the number of IPs they need in order to serve their existing customers.
However the allocation of private IPv4 addresses to customers may conflict with private IP allocations on the customer networks. Furthermore, some ISPs may have to divide their network into subnets to allow them to reuse private IPv4 addresses, complicating network administration. There are also concerns that features of consumer-grade NAT such as DMZs, STUN, UPnP and application-level gateways might not be available at the ISP level. ISP-level NAT may result in multiple-level address translation which is likely to further complicate the use of technologies such as port forwarding used to run Internet servers within private networks.
NAT64 translates IPv6 requests from clients to IPv4 requests. This avoids the need to provision any IPv4 addresses to clients and allows clients that only support IPv6 to access IPv4 resources. However this approach requires a DNS server with DNS64 capability and cannot support IPv4-only client devices.
DS-Lite (Dual-Stack Light) uses tunnels from the customer premises equipment to a network address translator at the ISP. The consumer premises equipment encapsulates the IPv4 packets in an IPv6 wrapper and sends them to a host known as the AFTR element. The AFTR element de-encapsulates the packets and performs network address translation before sending them to the public Internet. The NAT in the AFTR uses the IPv6 address of the client in its NAT mapping table. This means that different clients can use the same private IPv4 addresses, therefore avoiding the need for allocating private IPv4 IP addresses to customers or using multiple NATs.
Address plus Port allows stateless sharing of public IP addresses based on TCP/UDP port numbers. Each node is allocated both an IPv4 address and a range of port numbers to use. Other nodes may be allocated the same IPv4 address but a different range of ports. The technique avoids the need for stateful address translation mechanisms in the core of the network, thus leaving end users in control of their own address translation.
Long-term solution
Deployment of IPv6 is the standards-based solution to the IPv4 address shortage. IPv6 is endorsed and implemented by all Internet technical standards bodies and network equipment vendors. It encompasses many design improvements, including the replacement of the 32-bit IPv4 address format with a 128-bit address which provides an addressing space without limitations for the foreseeable future. IPv6 has been in active production deployment since June 2006, after organized worldwide testing and evaluation in the 6bone project ceased. Interoperability for hosts using only IPv4 protocols is implemented with a variety of IPv6 transition mechanisms.